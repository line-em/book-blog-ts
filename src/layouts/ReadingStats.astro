---
import { getMostReadGenres } from '../utils/genres'
import { getAverageStars } from '../utils/rating'
import { Book, MagicWand, Star } from '@phosphor-icons/react'
const books = Astro.props.books

const mostReadGenres = getMostReadGenres(books)
const averageStars = getAverageStars(
	books.map((book: { data: { score: number } }) => book.data.score)
)
---

<!--<aside--><!--	class="antialiased mb-2 flex flex-col items-center w-full bg-slate-50 shadow-md rounded-xl p-2 pb-4 mt-auto"--><!--&gt;-->
<aside class="antialiased flex flex-col items-center w-full border-y border-slate-200 py-8 my-4">
	<h3 class="font-bold mb-2 text-2xl">Reading Stats</h3>
	<ul class="flex gap-4 text-sm text-center items-center mt-2 lg:mt-0">
		<li class="flex flex-col lg:flex-row">
			<Book color="var(--pink)" weight="duotone" size="19" />
			Books read:
			<strong class="text-gradient">{books.length}</strong>
		</li>
		<li class="flex flex-col lg:flex-row">
			<MagicWand color="var(--pink)" weight="duotone" size="19" />
			Most read {mostReadGenres.length > 1 ? 'genres: ' : 'genre: '}
			<strong class="text-gradient">
				{mostReadGenres.join(', ')}
			</strong>
		</li>
		<li class="flex flex-col lg:flex-row">
			<Star color="var(--pink)" weight="duotone" size="19" />
			Average rating:
			<strong class="text-gradient">{averageStars}</strong>
		</li>
	</ul>
</aside>
